# Домашняя работа №1

## Содержание
1. [Содержание](#содержание)
1. [Задача](#задача)
1. [Консольное приложение](#консольное-приложение)
1. [Разделение обязанностей](#разделение-обязанностей)
1. [Дополнительный интерфейс](#дополнительный интерфейс)
1. [Консольное приложение](#консольное-приложение-1)
1. [Разделение обязанностей](#разделение-обязанностей-1)

## Задача
Приложение `./hw-01_bmp`, которое вырезает прямоугольник из BMP-файла с изображением,
поворачивает этот прямоугольник на 90 градусов по часовой стрелке и сохраняет результат в отдельный
файл.

Все изображения (изначальное для чтения и сохранённый результат) хранятся в заданном формате:

* Общий формат — [BMP](https://ru.wikipedia.org/wiki/BMP).
* В рамках формата BMP используется формат *DIB* с заголовком `BITMAPINFOHEADER` (версия 3).
* Значение поля `biHeight` (высота изображения) строго больше нуля.
* Используются 24 бита цвета на пиксель (один байт на цветовой канал).
* Палитра (таблица цветов) не используется.
* Сжатие не используется.

### Консольное приложение
Приложение запускается следующей командой:

```
./hw-01_bmp crop-rotate ‹in-bmp› ‹out-bmp› ‹x› ‹y› ‹w› ‹h›
```

Используемые параметры:

* `crop-rotate` — обязательный параметр, означающий выполняемое действие.
* `in-bmp` — имя входного файла с изображением.
* `out-bmp` — имя выходного файла с изображением.
* `x`, `y` — координаты левого верхнего угла области, которую необходимо вырезать и повернуть.
  Координаты начинаются с нуля, таким образом *(0, 0)* — это верхний левый угол.
* `w`, `h` — соотвественно, ширина и высота области до поворота.

Таким образом, если обозначить ширину и высоту исходного изображения за `W` и `H`, соответственно,
для корректных аргументов верны следующие неравенства:

* `0 <= x < x + w <= W`
* `0 <= y < y + h <= H`

### Разделение обязанностей
* Файлы `bmp.c` и `bmp.h` содержат работу с изображением, а именно функции:
  1. `load_bmp` (заргузка изображения).
  1. `crop` (вырезание фрагмента).
  1. `rotate` (поворот).
  1. `save_bmp` (сохранение изображения).
* Работа с аргументами и точка входа реализованы в `main.c`.

## Дополнительный интерфейс
В дополнение к команде `crop-rotate` реализованы команды `insert` и `extract`,
позволяющие спрятать внутри изображения сообщение
([стеганография](https://ru.wikipedia.org/wiki/%D0%A1%D1%82%D0%B5%D0%B3%D0%B0%D0%BD%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D1%8F)).
Команда `insert` сохраняет в изображение сообщение, а `extract` — извлекает его оттуда.

### Способ кодирования
Исходное сообщение состоит только из заглавных латинских букв, пробела, точки и запятой.
Каждый символ преобразовывается в число от 0 до 28, соответственно (всего 29 различных значений),
а число — в пять бит, записанных от младших к старшим.
Всего сообщение из `N` символов кодируется при помощи `5N` Бит.

Для передачи сообщения, помимо изображения-носителя, потребуется __ключ__ — текстовый файл,
описывающий, в каких пикселях кодируются биты сообщения.
В этом файле на отдельных строчках записаны:

* Координаты `x` и `y` (`0 <= x < W`, `0 <= y < H`) пикселя, в который надо сохранить
  соответствующий бит.
* Буква `R`/`G`/`B` обозначающая цветовой канал, в младшем бите которого требуется записать бит
  сообщения.

Если ключ записывает больше бит, чем нужно сообщению, последние строчки игнорируются.

### Консольное приложение
Для сохранения секретной строчки в изображение приложение запускается следующей командой:
```
./hw-01_bmp insert ‹in-bmp› ‹out-bmp› ‹key-txt› ‹msg-txt›
```

Для извлечения секретной строчки из изображения приложение запускается следующей командой:
```
./hw-01_bmp extract ‹in-bmp› ‹key-txt› ‹msg-txt›
```

Используемые параметры:

* `in-bmp` — имя входного файла с изображением.
* `out-bmp` — имя выходного файла с изображением.
* `key-txt` — тестовый файл с ключом.
* `msg-txt` — текстовый файл с секретным сообщением.

При этом остаются все остальные требования корректности: команда `crop-rotate`, проверка аргументов
и прочие.

### Разделение обязанностей
Функции для стеганографии реализованы в отдельных файлах `stego.h`/`stego.c`.
